<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CocinaRico</title>
  <link rel="icon" type="image/png" href="cocinarico.png.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f1ffe4;
    }

    .card-title {
      color: rgb(116, 194, 116);
      font-weight: bold;
    }
  </style>
</head>

<body>

  <header class="bg-white shadow sticky-top">
    <div class="container py-3 d-flex align-items-center gap-3">
      <span class="bg-success rounded-circle p-2 d-flex">
        <svg width="30" height="30" stroke="white" fill="none" stroke-width="2" stroke-linejoin="round"
          viewBox="0 0 24 24">
          <path
            d="M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z">
          </path>
          <path d="M6 17h12"></path>
        </svg>
      </span>
      <div>
        <h3 class="text-success m-0">CocinaRico</h3>
        <p class="text-muted m-0">Recetas saludables y deliciosas.</p>
      </div>
    </div>
  </header>

  <main class="container py-5">

    <h2 class="fw-semibold text-secondary">Bienvenido a CocinaRico!</h2>
    <p class="text-muted">Descubre recetas saludables con informaci√≥n nutricional... dise√±adas para 1 persona.</p>

    <section class="p-4 rounded bg-success bg-opacity-10 border border-success mt-4">
      <div class="d-flex gap-3">
        <span class="bg-success rounded-circle p-2 d-flex">
          <svg width="18" height="18" stroke="white" viewBox="0 0 24 24" fill="none" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <circle cx="12" cy="12" r="6"></circle>
            <circle cx="12" cy="12" r="2"></circle>
          </svg>
        </span>
        <div>
          <h5 class="m-0 fw-semibold">Macronutrientes necesarios</h5>
          <p class="text-muted m-0">Ingresa tus metas nutricionales...</p>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-md-3">
          <label class="form-label">üî•Calor√≠as</label>
          <div class="input-group">
            <input id="input-calories" type="number" min="0" placeholder="Ej: 400" class="form-control">
            <span class="input-group-text">kcal</span>
          </div>
        </div>

        <div class="col-md-3">
          <label class="form-label">üç™Carbohidratos</label>
          <div class="input-group">
            <input id="input-carbs" type="number" placeholder="Ej: 45" class="form-control">
            <span class="input-group-text">g</span>
          </div>
        </div>

        <div class="col-md-3">
          <label class="form-label">üçóProte√≠nas</label>
          <div class="input-group">
            <input id="input-protein" type="number" placeholder="Ej: 30" class="form-control">
            <span class="input-group-text">g</span>
          </div>
        </div>

        <div class="col-md-3">
          <label class="form-label">ü•ìGrasas</label>
          <div class="input-group">
            <input id="input-fat" type="number" placeholder="Ej: 15" class="form-control">
            <span class="input-group-text">g</span>
          </div>
        </div>
      </div>
    </section>

    <!-- arriba -->
    <section class="mt-4 d-flex flex-column gap-3">
      <div class="btn-group w-50 mx-auto">
        <button id="tab-all" class="btn btn-success">Todas las recetas</button>
        <button id="tab-favorites" class="btn btn-outline-success">Favoritas</button>
      </div>

      <div class="row g-3">
        <div class="col-md-8">
          <div class="input-group">
            <span class="input-group-text">
              <svg width="18" height="18" stroke="gray" fill="none" viewBox="0 0 24 24">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4-4"></path>
              </svg>
            </span>
            <input type="text" id="searchInput" class="form-control" placeholder="Buscar recetas...">
          </div>
        </div>

        <div class="col-md-2">
          <select id="categorySelect" class="form-select">
            <option value="all">Todas las categor√≠as</option>
            <option>Desayuno</option>
            <option>Almuerzo</option>
            <option>Cena</option>
            <option>Snack</option>
          </select>
        </div>

        <div class="col-md-2">
          <select id="difficultySelect" class="form-select">
            <option value="all">Todas las dificultades</option>
            <option>F√°cil</option>
            <option>Media</option>
            <option>Dif√≠cil</option>
          </select>
        </div>
      </div>
    </section>

    <!-- cards  -->
    <section class="mt-5">
      <h3 class="text-success fw-semibold">Recetas destacadas</h3>
      <div class="row mt-3">

        <div class="col-md-4 mb-4">
          <div class="card h-100 d-flex flex-column shadow">
            <img src="https://recetasdecocina.elmundo.es/wp-content/uploads/2025/05/ensalada-de-pollo.jpg"
              class="card-img-top" alt="">
            <div class="card-body text-center d-flex flex-column">
              <h5 class="card-title">Ensalada de Pollo</h5>
              <p class="text-muted">350 kcal - F√°cil - 20 min</p>
              <a href="https://recetasdecocina.elmundo.es/2025/05/ensalada-de-pollo-receta-sana-muy-completa.html"
                class="btn btn-success mt-auto" target="_blank">Ver receta completa</a>
            </div>
          </div>
        </div>

        <div class="col-md-4 mb-4">
          <div class="card h-100 d-flex flex-column shadow">
            <img
              src="https://kitchendance.com/cdn/shop/articles/vegan-wrap-recipes_12f2fe1c-a808-4cec-af40-f2e1a3181589_800x800.jpg?v=1752697663"
              class="card-img-top" alt="">
            <div class="card-body text-center d-flex flex-column">
              <h5 class="card-title">Wrap Vegetariano</h5>
              <p class="text-muted">420 kcal - Media - 30 min</p>
              <a href="https://kitchendance.com/es/blogs/default-blog/blog-vegan-wrap-recipes"
                class="btn btn-success mt-auto" target="_blank">Ver receta completa</a>
            </div>
          </div>
        </div>

        <div class="col-md-4 mb-4">
          <div class="card h-100 d-flex flex-column shadow">
            <img src="https://palasiet.com/wp-content/uploads/2024/07/Batido-Verde-Detox.jpg" class="card-img-top"
              alt="">
            <div class="card-body text-center d-flex flex-column">
              <h5 class="card-title">Batido Detox</h5>
              <p class="text-muted">260 kcal - F√°cil - 10 min</p>
              <a href="https://www.google.com/search?q=batido+detox" class="btn btn-success mt-auto" target="_blank">Ver
                receta completa</a>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- API -->
    <div id="api-recipes-placeholder">
      <div class="row mt-4">
        <div class="col-md-4 mb-4">
          <div class="card h-100 shadow">
            <img src="https://img.spoonacular.com/recipes/780000-312x231.jpg" class="card-img-top"
              alt="Chicken Avocado Burger (Whole 30, PALEO, &amp; Simple Fit Forty)">
            <div class="card-body text-center d-flex flex-column">
              <h5 class="card-title">Chicken Avocado Burger (Whole 30, PALEO, &amp; Simple Fit Forty)</h5>
              <p class="text-muted">üçΩ 45 min | ‚≠ê 15 salud</p>
              <a href="https://www.pinkwhen.com/chicken-avocado-burger/" target="_blank" rel="noopener"
                class="btn btn-success mt-auto">Ver receta completa</a>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    (async () => {
      const apiKey = "2ce05d35c7b74944bee242e258564702";
      const searchInput = document.getElementById("searchInput");
      const placeholder = document.getElementById("api-recipes-placeholder");


      const resultsContainer = document.createElement("div");
      resultsContainer.className = "row mt-4";
      placeholder.appendChild(resultsContainer);


      await loadRecipes("fit");


      async function loadRecipes(search) {
        const q = encodeURIComponent(search);
        const url = `https://api.spoonacular.com/recipes/complexSearch?query=${q}&number=9&addRecipeInformation=true&apiKey=${apiKey}`;

        resultsContainer.innerHTML = `
            <div class="col-12 text-center py-4">
                <div class="spinner-border text-success" role="status" aria-hidden="true"></div>
                <div class="mt-2 text-muted">Buscando recetas‚Ä¶</div>
            </div>
        `;

        try {
          const res = await fetch(url);
          if (!res.ok) throw new Error('Error en la respuesta de la API: ' + res.status);
          const data = await res.json();


          resultsContainer.innerHTML = "";
          const recipes = data.results || [];

          if (recipes.length === 0) {
            resultsContainer.innerHTML = `<div class="col-12 text-center text-muted py-4">No se encontraron recetas para "<strong>${escapeHtml(search)}</strong>".</div>`;
            return;
          }

          recipes.forEach(recipe => {
            const card = document.createElement("div");
            card.className = "col-md-4 mb-4";
            const title = escapeHtml(recipe.title || "Sin t√≠tulo");
            const image = recipe.image || "";
            const mins = recipe.readyInMinutes || "N/A";
            const health = (recipe.healthScore !== undefined) ? recipe.healthScore : "N/A";
            const source = recipe.sourceUrl || recipe.spoonacularSourceUrl || "#";

            card.innerHTML = `
                    <div class="card h-100 shadow">
                        <img src="${image}" class="card-img-top" alt="${title}">
                        <div class="card-body text-center d-flex flex-column">
                            <h5 class="card-title">${title}</h5>
                            <p class="text-muted">üçΩ ${mins} min | ‚≠ê ${health} salud</p>
                            <a href="${source}" target="_blank" rel="noopener" class="btn btn-success mt-auto">Ver receta completa</a>
                        </div>
                    </div>
                `;
            resultsContainer.appendChild(card);
          });
        } catch (err) {
          console.error(err);
          resultsContainer.innerHTML = `<div class="col-12 text-center text-danger py-4">Ocurri√≥ un error al obtener recetas. Revisa la consola. (${escapeHtml(err.message)})</div>`;
        }
      }

      //  enter
      searchInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          const value = searchInput.value.trim();
          if (value !== "") loadRecipes(value);
        }
      });


      function escapeHtml(str) {
        return String(str)
          .replaceAll('&', '&amp;')
          .replaceAll('<', '&lt;')
          .replaceAll('>', '&gt;')
          .replaceAll('"', '&quot;')
          .replaceAll("'", '&#39;');
      }
    })();
  </script>


</body>

</html>